<!-- üìÑ SECTION 2 - CZƒò≈öƒÜ JAVASCRIPTU DO DODANIA W index.html -->

<!-- W <script> sekcji (po showStatus function) dodaj: -->

let summarySource = 'video';  // 'video' lub 'file'

function setSummarySource(btn, source) {
    // Update button state
    Array.from(btn.parentElement.children).forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    summarySource = source;
    
    // Show/hide input groups
    const videoGroup = document.getElementById('videoUrlGroup');
    const fileGroup = document.getElementById('fileUploadGroup');
    
    if (source === 'video') {
        videoGroup.style.display = 'block';
        fileGroup.style.display = 'none';
        document.getElementById('videoUrl').value = document.getElementById('summaryVideoUrl').value;
    } else {
        videoGroup.style.display = 'none';
        fileGroup.style.display = 'block';
    }
}

// Handle file selection
document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.getElementById('transcriptFile');
    if (fileInput) {
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.txt')) {
                showStatus('summarizeStatus', 'Error: Only .txt files allowed', 'error');
                e.target.value = '';
                return;
            }
            
            const fileSize = (file.size / 1024).toFixed(2);
            const reader = new FileReader();
            reader.onload = function(evt) {
                const wordCount = evt.target.result.split(/\s+/).length;
                document.getElementById('fileInfo').innerHTML = 
                    `‚úì ${file.name} | ${fileSize} KB | ${wordCount} words`;
            };
            reader.readAsText(file);
        });
    }
});

async function generateSummary() {
    const fileInput = document.getElementById('transcriptFile');
    const videoUrlInput = document.getElementById('summaryVideoUrl');
    
    if (summarySource === 'video') {
        const url = videoUrlInput.value.trim() || document.getElementById('videoUrl').value.trim();
        if (!url) {
            showStatus('summarizeStatus', 'Enter YouTube URL', 'error');
            return;
        }
        
        showStatus('summarizeStatus', 'Processing...', 'loading');
        
        try {
            const response = await fetch(`${API_BASE}/summarize`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    url,
                    type: selectedSummaryType,
                    format: selectedSummaryFormat
                })
            });
            
            if (!response.ok) throw new Error('Failed');
            
            currentSummary = await response.blob();
            showStatus('summarizeStatus', '[OK] Ready!', 'success');
            document.getElementById('summarizeDownloadBtn').style.display = 'block';
        } catch (e) {
            showStatus('summarizeStatus', 'Error: ' + e.message, 'error');
        }
    } else {
        // File upload mode
        if (!fileInput.files.length) {
            showStatus('summarizeStatus', 'Select a .txt file', 'error');
            return;
        }
        
        const file = fileInput.files[0];
        if (!file.name.endsWith('.txt')) {
            showStatus('summarizeStatus', 'Only .txt files allowed', 'error');
            return;
        }
        
        showStatus('summarizeStatus', 'Processing...', 'loading');
        
        try {
            const formData = new FormData();
            formData.append('transcript_file', file);
            formData.append('type', selectedSummaryType);
            formData.append('format', selectedSummaryFormat);
            
            const response = await fetch(`${API_BASE}/summarize`, {
                method: 'POST',
                body: formData
            });
            
            if (!response.ok) throw new Error('Failed');
            
            currentSummary = await response.blob();
            showStatus('summarizeStatus', '[OK] Ready!', 'success');
            document.getElementById('summarizeDownloadBtn').style.display = 'block';
        } catch (e) {
            showStatus('summarizeStatus', 'Error: ' + e.message, 'error');
        }
    }
}

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PE≈ÅNY HTML - Zamie≈Ñ sekcjƒô summarize ca≈ÇƒÖ: -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

            <!-- SECTION 2: SUMMARIZE -->
            <div class="section summarize">
                <h2>‚ú® Section 2: Summarize</h2>

                <div class="options">
                    <!-- SOURCE SELECTOR -->
                    <div class="option-group">
                        <label>üìÅ Transcript Source:</label>
                        <div class="option-buttons">
                            <button class="option-btn active" onclick="setSummarySource(this, 'video')">From Video</button>
                            <button class="option-btn" onclick="setSummarySource(this, 'file')">From File ‚≠ê</button>
                        </div>
                    </div>

                    <!-- VIDEO URL INPUT (shown by default) -->
                    <div id="videoUrlGroup" class="option-group">
                        <label>YouTube URL:</label>
                        <input type="text" id="summaryVideoUrl" placeholder="Paste YouTube URL..." style="width: 100%; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 13px; font-family: monospace;">
                    </div>

                    <!-- FILE UPLOAD (hidden by default) -->
                    <div id="fileUploadGroup" class="option-group" style="display: none;">
                        <label>üìÑ Upload Transcript File:</label>
                        <input type="file" id="transcriptFile" accept=".txt" style="width: 100%; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 13px;">
                        <div id="fileInfo" style="font-size: 12px; color: #6b7280; margin-top: 6px; padding: 6px; background: #f3f4f6; border-radius: 4px;"></div>
                    </div>

                    <!-- SUMMARY TYPE -->
                    <div class="option-group">
                        <label>Summary Type:</label>
                        <div class="option-buttons">
                            <button class="option-btn" onclick="setSummaryType(this, 'concise')">Concise</button>
                            <button class="option-btn active" onclick="setSummaryType(this, 'normal')">Normal ‚≠ê</button>
                            <button class="option-btn" onclick="setSummaryType(this, 'detailed')">Detailed</button>
                        </div>
                    </div>

                    <!-- OUTPUT FORMAT -->
                    <div class="option-group">
                        <label>Format:</label>
                        <div class="option-buttons">
                            <button class="option-btn active" onclick="setSummaryFormat(this, 'pdf')">PDF</button>
                            <button class="option-btn" onclick="setSummaryFormat(this, 'txt')">TXT</button>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-action" onclick="generateSummary()">Generate Summary</button>
                </div>

                <div class="status" id="summarizeStatus"></div>
                <button class="btn-download" id="summarizeDownloadBtn" onclick="downloadSummary()">‚Üì Download Summary</button>
            </div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- INSTRUKCJE INSTALACJI -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

STEP 1: Otw√≥rz index_v4.html
Location: C:\ZOSTAWIC\Tools\Moj_yt_pdf_converter\local\index.html

STEP 2: Znajd≈∫ sekcjƒô:
  <!-- SECTION 2: SUMMARIZE -->
  <div class="section summarize">

STEP 3: Zamie≈Ñ ca≈ÇƒÖ sekcjƒô (od <div class="section summarize"> 
do </div>) na nowƒÖ zawarto≈õƒá powy≈ºej

STEP 4: W <script> sekcji (przed ostatnim </script>):
- Dodaj nowƒÖ zmiennƒÖ: let summarySource = 'video';
- Dodaj funkcjƒô: function setSummarySource(btn, source) { ... }
- Zamie≈Ñ funkcjƒô: async function generateSummary() { ... }
- Dodaj DOMContentLoaded event listener dla file input

STEP 5: Zapisz (Ctrl+S)

STEP 6: Reload strony w przeglƒÖdarce (Ctrl+F5)

STEP 7: Testuj!
- Prze≈ÇƒÖczaj miƒôdzy "From Video" i "From File"
- Wczytaj plik .txt z transkryptem
- Generuj streszczenie
